SPOOL ranger-new-db-file6.log
SET FEEDBACK OFF;
set serveroutput off ;

CREATE INDEX IX_FP_TEMP_PROF_ENT_ID ON FP_TEMP_PROFILES("PROFILED_ENTITY_ID") ;

CREATE SEQUENCE FP_ONDEMAND_PARAMETERS_SEQ ;

CREATE TABLE FP_ONDEMAND_PARAMETERS
(
    ID                  NUMBER(20),
    ENTITY_ID           NUMBER(20) NOT NULL,
    PROFILED_ENTITY_ID  NUMBER(20) NOT NULL,
    REFERENCE_VALUE VARCHAR2(64)   NOT NULL,
    CONSTRAINT FP_ONDEMAND_PARAMETERS PRIMARY KEY (ENTITY_ID,PROFILED_ENTITY_ID,REFERENCE_VALUE)
) ;


CREATE SEQUENCE FP_ELEMENTS_RULES_SEQ INCREMENT BY 1 START WITH 1 NOMAXVALUE MINVALUE 1 NOCYCLE;
CREATE TABLE FP_ELEMENTS_RULES(
    ID                                                  NUMBER(20)              NOT NULL,
        RULE_ID                                         NUMBER(20)              NOT NULL,
    FP_ELEMENT_ID                           NUMBER(20)          NOT NULL,
    WEIGHTAGE                               NUMBER(20)          NOT NULL,
    MINIMUM_PERCENTAGE_MATCH    NUMBER(20)              NOT NULL,
        CONSTRAINT PK_FP_ELEM_RUL_ID PRIMARY KEY(ID),
        CONSTRAINT FK_FP_ELEM_RUL_RUL_ID FOREIGN KEY(RULE_ID) REFERENCES RULES(ID)
);

CREATE SEQUENCE NEGATIVE_RULE_EXEC_STATUS_SEQ INCREMENT BY 1 START WITH 1 NOMAXVALUE MINVALUE 1 NOCYCLE;
CREATE TABLE NEGATIVE_RULE_EXEC_STATUS (
        ID                              NUMBER(20)      NOT NULL,
        RULE_ID                 NUMBER(20)      NOT NULL,
        STATUS                  NUMBER(2)       NOT NULL,
        START_TIME              DATE            NOT NULL,
        END_TIME                DATE,
        CONSTRAINT PK_NEG_RULE_EXE_ST_ID PRIMARY KEY(ID),
        CONSTRAINT FK_NEG_RULE_EXE_ST_RULE_ID FOREIGN KEY(RULE_ID) REFERENCES RULES(ID)
) ;


CREATE SEQUENCE FP_FILTERED_ENTITIES_SEQ INCREMENT BY 1 START WITH 1 NOMAXVALUE MINVALUE 1 NOCYCLE;

commit;
spool off
