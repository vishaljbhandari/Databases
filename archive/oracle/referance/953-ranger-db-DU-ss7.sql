SET FEEDBACK OFF
spool ranger-db-ss7.log

DROP TABLE CHARGING_CASE_DETAILS ;
DROP TABLE CLI_SUBSCRIBER_NUMBER_MAP ;
DROP TABLE CALL_TYPE_DETAILS ;
DROP TABLE CALL_TYPE_INFO ;
DROP TABLE CALL_TYPE_MAP ;
DROP TABLE ZERO_RATED_CDR ;
DROP TABLE PPA_SERVICE_APP_ID ;
DROP TABLE ZONECODE_COUNTRYCODE_MAP ;
DROP TABLE ZONECODE_RATE_DETAILS ;
DROP TABLE DU_OPC_DPC ;
DROP TABLE OP_ASSISTED_CODE ;
DROP TABLE DU_INCOMING_ROUTES ;
DROP TABLE DU_SPECIAL_NUMBERS ;
DROP TABLE RATING_CONFIGURATION ;
DROP TABLE PREPAID_SUBSCRIBER ;
DROP TABLE POSTPAID_SUBSCRIBER_TYPES ;
DROP TABLE SUB_ACTION_INDICATOR_MAP ;
DROP TABLE SUBSCRIBER_SERVICE_MAP ;

DROP SEQUENCE PREPAID_SUBSCRIBER_ID ;

CREATE TABLE CHARGING_CASE_DETAILS
(
	CHARGING_CASE			VARCHAR(8)  NOT NULL,
	CALL_TYPE				NUMBER(8)   NOT NULL,
	DEST_CALL_CATEGORY		VARCHAR2(8) NOT NULL,
	IS_PREPAID				VARCHAR2(4) NOT NULL,
	CONSTRAINT CHECK_PREPAID CHECK ( IS_PREPAID IN ('Y', 'N')),
	CONSTRAINT PK_CH_CA_DE_CH_CA PRIMARY KEY (CHARGING_CASE)
) ;

CREATE TABLE CLI_SUBSCRIBER_NUMBER_MAP
(
	CLI						VARCHAR2(40) NOT NULL,
	SUBSCRIBER_NUMBER		VARCHAR2(40) NOT NULL,
	CONSTRAINT PK_RA_CLI_SUB_NUM PRIMARY KEY (CLI)
);

CREATE TABLE CALL_TYPE_DETAILS
(
 	VALUE					VARCHAR2(20) NOT NULL,
	CALL_TYPE				NUMBER(4) NOT NULL,
	DESCRIPTION				VARCHAR2(40),
	DEST_CALL_CATEGORY      VARCHAR2(4),
	CONSTRAINT CHECK_CA_TY_DE_CALL_TYPE CHECK ( CALL_TYPE IN (1, 2, 3))
) ;

CREATE TABLE CALL_TYPE_INFO 
( 
    DESCRIPTION  VARCHAR2(256),
    CODE         VARCHAR2(256) NOT NULL,
    ID           NUMBER(16) NOT NULL
) ;

CREATE TABLE CALL_TYPE_MAP
(
    KEY     			VARCHAR2(64) ,
    CALLTYPE_VALUE 		VARCHAR2(32)
);

CREATE TABLE ZERO_RATED_CDR
(
 	ACCOUNT_ID			VARCHAR2(40),
	INCOMING_ROUTE		VARCHAR2(40),
	OUTGOING_ROUTE		VARCHAR2(40),
	TIME_STAMP			DATE  NOT NULL,
	RECORD_TYPE			NUMBER(4) NOT NULL,
	CALLER_NUMBER		VARCHAR2(40),
	CALLED_NUMBER		VARCHAR2(40) NOT NULL,
	DURATION			NUMBER(20) NOT NULL
);
	
CREATE TABLE PPA_SERVICE_APP_ID
(
	ID			NUMBER(20) NOT NULL
);

CREATE TABLE ZONECODE_COUNTRYCODE_MAP
(
 	ZONE_CODE		VARCHAR2(10) ,
	COUNTRY_CODE	VARCHAR2(10) ,
	CONSTRAINT PK_ZC_CC PRIMARY KEY(ZONE_CODE,COUNTRY_CODE) 
) ;

CREATE TABLE ZONECODE_RATE_DETAILS
(
 	ZONE_CODE				VARCHAR2(40) NOT NULL ,
	RATE					NUMBER(16,6) NOT NULL ,
	RATE_PLAN				VARCHAR2(40) NOT NULL ,
	MIN_DURATION			NUMBER(10) DEFAULT 60 NOT NULL ,
	ADDITIONAL_DURATION		NUMBER(10) DEFAULT 60 NOT NULL ,
	RECORD_TYPE				NUMBER(5) DEFAULT 1 NOT NULL ,
	IS_OPERATOR_ASSISTED	NUMBER(5) DEFAULT 0 NOT NULL ,
	CONSTRAINT PK_ZC_RA PRIMARY KEY(ZONE_CODE, RATE_PLAN, RECORD_TYPE, IS_OPERATOR_ASSISTED) 
);

CREATE TABLE DU_OPC_DPC
(
	POINTCODE	VARCHAR2(20),
	CATEGORY	VARCHAR2(20)
) ;

CREATE TABLE OP_ASSISTED_CODE
(
 	POINT_CODE	VARCHAR2(20) 
) ;

CREATE TABLE DU_INCOMING_ROUTES
(
	ROUTE					VARCHAR2(32) NOT NULL
) ;

CREATE TABLE DU_SPECIAL_NUMBERS
(
	ACCOUNT_ID              VARCHAR2(40) NOT NULL,
	PHONE_NUMBER            VARCHAR2(40),
	RATE					NUMBER(16,6)
) ;

CREATE TABLE RATING_CONFIGURATION
(
	RATE_PLAN				VARCHAR2(40),
 	SEQUENCE_NUMBER			NUMBER(8),
	START_TIME				DATE,
	END_TIME				DATE,
	CALL_TYPE				NUMBER(2), 
	DEST_CALL_CATEGORY		VARCHAR(4),
	PULSE					NUMBER(8),
	RATE					NUMBER(16,6),
	CONSTRAINT CHECK_CALL_TYPE CHECK ( CALL_TYPE IN (1, 2, 3)),
	CONSTRAINT CHECK_DE_CA_CA CHECK (DEST_CALL_CATEGORY IN ('M', 'F')),
	CONSTRAINT PK_RA_CON PRIMARY KEY (RATE_PLAN, SEQUENCE_NUMBER, START_TIME, END_TIME, CALL_TYPE, DEST_CALL_CATEGORY)
) ;

CREATE SEQUENCE PREPAID_SUBSCRIBER_ID INCREMENT BY 1 START WITH 1 NOMAXVALUE NOMINVALUE NOCYCLE CACHE 20 ORDER;
CREATE TABLE PREPAID_SUBSCRIBER (
	ID			NUMBER(20,0) NOT NULL,
	PHONE_NUMBER		VARCHAR2(40) NOT NULL,
	VOUCHER_EXPIRY_DATE 	DATE, 
	GRACE_PERIOD_EXPIRY_DATE	DATE,
	CURRENT_BALANCE		NUMBER(16,6) NOT NULL,
	PREVIOUS_BALANCE   	NUMBER(16,6), 
	LAST_RECHARGE_DATE	DATE, 
	LAST_CDR_TIME		DATE, 
	DIFF_BALANCE_PERCENTAGE	NUMBER(16,6) DEFAULT 0 NOT NULL,
	NETWORK_ID		NUMBER(20, 0)	DEFAULT 0 NOT NULL,
	STATUS			NUMBER(8),
	RATE_PLAN		VARCHAR2(256),
	IMSI_NUMBER		VARCHAR2(40) ,
	QOS			NUMBER(2) DEFAULT 0,
	SERVICES	NUMBER(20) DEFAULT 2047,
	CONNECTION_TYPE			NUMBER(2) NOT NULL,
	CONSTRAINT PK_PRE_SUB_ID PRIMARY KEY (ID)) ;

CREATE TABLE POSTPAID_SUBSCRIBER_TYPES
(
	VALUE				VARCHAR2(32) NOT NULL	
) ;

CREATE TABLE SUB_ACTION_INDICATOR_MAP
(  
    RAW_STATUS          VARCHAR2(32) NOT NULL,
    ACTION_INDICATOR    VARCHAR2(20) NOT NULL,
	SERVICE				NUMBER(8) NOT NULL,
    DESCRIPTION         VARCHAR2(256)
) ;

CREATE TABLE SUBSCRIBER_SERVICE_MAP 
(
	RAW_SERVICE			VARCHAR2(32) NOT NULL,
	VALUE				NUMBER(8) NOT NULL	
) ;

quit ;
spool off ;
