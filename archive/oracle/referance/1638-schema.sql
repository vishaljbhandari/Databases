
drop sequence RANGER_USERS_SEQ;

CREATE SEQUENCE RANGER_USERS_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence RECORD_CONFIGS_SEQ;
CREATE SEQUENCE RECORD_CONFIGS_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence REFERENCE_TYPES_SEQ;
CREATE SEQUENCE REFERENCE_TYPES_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence TASKS_SEQ;
CREATE SEQUENCE TASKS_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence TRANSLATION_INDICES_SEQ ;
CREATE SEQUENCE TRANSLATION_INDICES_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence TRANSLATIONS_SEQ;
CREATE SEQUENCE TRANSLATIONS_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence REGULAR_EXPRESSIONS_SEQ;
CREATE SEQUENCE REGULAR_EXPRESSIONS_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence RECORD_VIEW_CONFIGS_SEQ;
CREATE SEQUENCE RECORD_VIEW_CONFIGS_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence DAC_RECORD_VIEWS_TASKS_SEQ;
CREATE SEQUENCE DAC_RECORD_VIEWS_TASKS_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence RC_RECORD_CONFIGS_SEQ;
CREATE SEQUENCE RC_RECORD_CONFIGS_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence EXPANDABLE_FIELD_MAPS_SEQ;
CREATE SEQUENCE EXPANDABLE_FIELD_MAPS_SEQ START WITH 8096 INCREMENT BY 1 CACHE 20 MINVALUE 8096;

drop sequence FIELD_CATEGORIES_SEQ;
CREATE SEQUENCE FIELD_CATEGORIES_SEQ START WITH 8096 INCREMENT BY 1 CACHE 20 MINVALUE 8096;

drop sequence FUNCTIONS_SEQ;
CREATE SEQUENCE FUNCTIONS_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence PSEUDO_FUNCTIONS_SEQ;
CREATE SEQUENCE PSEUDO_FUNCTIONS_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence ACCUMULATION_FIELD_UNITS_SEQ;
CREATE SEQUENCE ACCUMULATION_FIELD_UNITS_SEQ START WITH 1024 INCREMENT BY 1 CACHE 20 MINVALUE 1024;

drop sequence RULES_SEQ;
CREATE SEQUENCE RULES_SEQ START WITH 8192 INCREMENT BY 1 CACHE 20 MINVALUE 8192;

drop sequence LIST_CONFIGS_SEQ;
CREATE SEQUENCE LIST_CONFIGS_SEQ START WITH 2048 INCREMENT BY 1 CACHE 20 MINVALUE 2048;

drop sequence FRAUD_TYPES_SEQ;
CREATE SEQUENCE FRAUD_TYPES_SEQ START WITH 2048 INCREMENT BY 1 CACHE 20 MINVALUE 2048;

drop sequence ACTIONS_SEQ;
CREATE SEQUENCE ACTIONS_SEQ START WITH 1024 INCREMENT BY 1 CACHE 20 MINVALUE 1024;

drop sequence ANALYST_ACTIONS_SEQ;
CREATE SEQUENCE ANALYST_ACTIONS_SEQ START WITH 1024 INCREMENT BY 1 CACHE 20 MINVALUE 1024;

drop sequence TAGS_SEQ;
CREATE SEQUENCE TAGS_SEQ START WITH 1024 INCREMENT BY 1 CACHE 20 MINVALUE 1024;

drop sequence FORMULAS_SEQ;
CREATE SEQUENCE FORMULAS_SEQ START WITH 2048 INCREMENT BY 1 CACHE 20 MINVALUE 2048;

drop sequence PROFILE_OPTIONS_SEQ;
CREATE SEQUENCE PROFILE_OPTIONS_SEQ START WITH 2048 INCREMENT BY 1 CACHE 20 MINVALUE 2048;


drop sequence COLOR_CODES_SEQ;
CREATE SEQUENCE COLOR_CODES_SEQ START WITH 1024 INCREMENT BY 1 CACHE 20 MINVALUE 1024;

drop sequence AUDIT_LOG_EVENT_CODES_SEQ;
CREATE SEQUENCE AUDIT_LOG_EVENT_CODES_SEQ START WITH 4098 INCREMENT BY 1 CACHE 20 MINVALUE 4098;

drop sequence ASN_GROUPS_SEQ;
CREATE SEQUENCE ASN_GROUPS_SEQ START WITH 1024 INCREMENT BY 1 CACHE 20 MINVALUE 1024;

drop sequence REFERENCE_TYPES_MAPS_SEQ;
CREATE SEQUENCE REFERENCE_TYPES_MAPS_SEQ START WITH 128 INCREMENT BY 1 CACHE 20 MINVALUE 128;

drop sequence SERVICE_CATEGORIES_SEQ;
CREATE SEQUENCE SERVICE_CATEGORIES_SEQ START WITH 2048 INCREMENT BY 1 CACHE 20 MINVALUE 2048;

-------alter columns 
alter table configurations modify VALUE varchar2(4000);

alter table record_configs drop column IS_DYNAMIC_QUERY;

alter table record_configs add IS_DYNAMIC_QUERY  NUMBER(2) default 0;

alter table record_view_configs drop column DYN_WHERE_CLUSE_PERF_SPEED;

alter table record_view_configs add DYN_WHERE_CLUSE_PERF_SPEED  NUMBER(2) default 1;

alter table FP_ELEMENTS drop constraint FK_FING_PRT_ELE_ENT_TYPE;

alter table FP_ENTITIES drop constraint UK_FING_PRT_ENT_TYPE ;

drop index UK_FING_PRT_ENT_TYPE;


--------------tables creation

drop table FIELD_PERF_SPEED_MAPPINGS ;

create table FIELD_PERF_SPEED_MAPPINGS
(
 ID	NUMBER,
 RECORD_CONFIG_ID	NUMBER(20) NOT NULL,
 FIELD_ID	NUMBER(20) NOT NULL,
 IS_SLOW_FIELD	 NUMBER(2),
 primary key(ID),
 CONSTRAINT FK_FIELD_PERF_RC_ID
 FOREIGN KEY (RECORD_CONFIG_ID)
 REFERENCES RECORD_CONFIGS(id)
);

drop sequence FIELD_PERF_SPEED_MAPPINGS_SEQ ;

CREATE SEQUENCE FIELD_PERF_SPEED_MAPPINGS_SEQ
START WITH 1
INCREMENT BY 1
CACHE 20
MINVALUE 1;

drop table DYNAMIC_QUERY_PATHS ;

create table DYNAMIC_QUERY_PATHS
(
 ID	NUMBER,
 RECORD_CONFIG_ID	NUMBER(20) NOT NULL,
 QUERY_SPEED_CATEGORY	NUMBER(2) NOT NULL,
 RELATIVE_PATH	VARCHAR2(256) NOT NULL,
 primary key(ID),
 CONSTRAINT FK_DYNAMIC_QUERY_RC_ID
 FOREIGN KEY (RECORD_CONFIG_ID)
 REFERENCES RECORD_CONFIGS(id)
);

drop sequence DYNAMIC_QUERY_PATHS_SEQ;

CREATE SEQUENCE DYNAMIC_QUERY_PATHS_SEQ
START WITH 1
INCREMENT BY 1
CACHE 20
MINVALUE 1;

drop table QUERY_STATUS_TABLE;

create table QUERY_STATUS_TABLE
(
 USER_ID	NUMBER(20),
 SESSION_ID	VARCHAR2(255),
 WINDOW_ID	VARCHAR2(255),
 TABLE_NAME	VARCHAR2(255),
 SEQUENCE_ID	NUMBER(20)
);

drop table FP_FILTERED_ENTITIES_7;

create table FP_FILTERED_ENTITIES_7
(
 ID	NUMBER(10),
 ENTITY_TYPE	NUMBER(20),
 ENTITY_ID	NUMBER(20)
);

drop table FP_SUSPECT_PROFILES_7;

create table FP_SUSPECT_PROFILES_7
(
 ID	NUMBER(20) NOT NULL,
 ENTITY_ID	NUMBER(20) NOT NULL,
 PROFILED_ENTITY_ID NUMBER(20) NOT NULL,
 GENERATED_DATE	DATE NOT NULL,
 SERIAL_NUMBER	NUMBER(20) NOT NULL,
 ELEMENTS	VARCHAR2(4000)  NOT NULL,
 IS_MATCH_TYPE	NUMBER(2)  NOT NULL,
 VERSION	NUMBER(20) NOT NULL,
 RUN_IDENTIFIER	NUMBER(20) NOT NULL
);


create index IX_FP_ENT_ID_SUSP_7 on FP_SUSPECT_PROFILES_7 (PROFILED_ENTITY_ID);

drop table FP_PROFILES_7_1;

create table FP_PROFILES_7_1
(
 ID	NUMBER(20) NOT NULL,
 ENTITY_ID	NUMBER(20) NOT NULL,
 PROFILED_ENTITY_ID NUMBER(20) NOT NULL,
 GENERATED_DATE	DATE NOT NULL,
 SERIAL_NUMBER	NUMBER(20) NOT NULL,
 ELEMENTS	VARCHAR2(4000) NOT NULL,
 IS_MATCH_TYPE	NUMBER(2) NOT NULL,
 VERSION	NUMBER(20) NOT NULL,
 RUN_IDENTIFIER	NUMBER(20) NOT NULL
);


create index IX_FP_PROF_ENT_ID_7_1 on FP_PROFILES_7_1 (PROFILED_ENTITY_ID) ;

drop table FP_PROFILES_7_0_2 ;

create table FP_PROFILES_7_0_2
(
 ID NUMBER(20) NOT NULL,
 ENTITY_ID  NUMBER(20) NOT NULL,
 PROFILED_ENTITY_ID NUMBER(20) NOT NULL,
 GENERATED_DATE DATE NOT NULL,
 SERIAL_NUMBER  NUMBER(20) NOT NULL,
 ELEMENTS   VARCHAR2(4000) NOT NULL,
 IS_MATCH_TYPE  NUMBER(2) NOT NULL,
 VERSION    NUMBER(20) NOT NULL,
 RUN_IDENTIFIER NUMBER(20) NOT NULL
);


create index IX_FP_PROF_ENT_ID_7_0_2 on FP_PROFILES_7_0_2 (PROFILED_ENTITY_ID) ;

drop table FP_PROFILES_7_0_3 ;

create table FP_PROFILES_7_0_3
(
 ID NUMBER(20) NOT NULL,
 ENTITY_ID  NUMBER(20) NOT NULL,
 PROFILED_ENTITY_ID NUMBER(20) NOT NULL,
 GENERATED_DATE DATE NOT NULL,
 SERIAL_NUMBER  NUMBER(20) NOT NULL,
 ELEMENTS   VARCHAR2(4000) NOT NULL,
 IS_MATCH_TYPE  NUMBER(2) NOT NULL,
 VERSION    NUMBER(20) NOT NULL,
 RUN_IDENTIFIER NUMBER(20) NOT NULL
);


create index IX_FP_PROF_ENT_ID_7_0_3 on FP_PROFILES_7_0_3 (PROFILED_ENTITY_ID) ;

