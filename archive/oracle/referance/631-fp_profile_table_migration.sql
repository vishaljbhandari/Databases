spool fp_profile_table_migration.log
create table fp_profiles_bak as select * from fp_profiles ;
drop table fp_profiles cascade constraints ;

CREATE TABLE FP_PROFILES(
	ID						NUMBER(20)		NOT NULL,
	ENTITY_ID				NUMBER(20)		NOT NULL,
	PROFILED_ENTITY_ID		NUMBER(20)		NOT NULL,
	START_DATE				DATE			NOT NULL,
	END_DATE				DATE			NOT NULL,
	SERIAL_NUMBER			NUMBER(20)		NOT NULL,
	ELEMENTS				VARCHAR2(4000)	NOT NULL,
	IS_MATCH_TYPE			NUMBER(2)       NOT NULL,
	VERSION					NUMBER(20)      NOT NULL,
	RUN_IDENTIFIER			NUMBER(20)		DEFAULT 0 NOT NULL,
	CONSTRAINT FK_FING_PRT_PROF_ENT_ID FOREIGN KEY (ENTITY_ID) REFERENCES FP_ENTITIES(ID))
	PARTITION BY RANGE(RUN_IDENTIFIER) (
			PARTITION P00  VALUES LESS THAN (1),
			PARTITION P01  VALUES LESS THAN (2),
			PARTITION P02  VALUES LESS THAN (3),
			PARTITION P03  VALUES LESS THAN (4),
			PARTITION P04  VALUES LESS THAN (5),
			PARTITION P05  VALUES LESS THAN (6),
			PARTITION P06  VALUES LESS THAN (7),
			PARTITION P07  VALUES LESS THAN (8),
			PARTITION P08  VALUES LESS THAN (9),
			PARTITION P09  VALUES LESS THAN (10)
	) TABLESPACE TS_NIKIRA ;

insert into fp_profiles select * from fp_profiles_bak ;
commit ;
drop table fp_profiles_bak ;
spool off ;
quit ;

