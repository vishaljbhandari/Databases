spool nikira-DDL-enable-disable-feature.log
ALTER TABLE RECORD_CONFIGS ADD STATUS NUMBER ; 
--TODO should be moved to the create table file.

ALTER TABLE AGGREGATION_TYPES DROP COLUMN RECORD_CONFIG_IDS ; 
ALTER TABLE AGGREGATION_TYPES ADD STATUS NUMBER ; 
--TODO should be moved to the create table file.


CREATE TABLE FEATURE_STATUS
(
ID 					NUMBER,
NAME				VARCHAR2(1024),
STATUS 				NUMBER,
PARENT_ID			NUMBER, --TODO - if this column is not being used should be removed.
CONSTRAINT PK_FEATURE_STATUS_ID PRIMARY KEY(ID)
);
CREATE SEQUENCE FEATURE_STATUS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_ENTITY_TYPES
(
ID					NUMBER,
FEATURE_ID 			NUMBER,
ENTITY_TYPE_ID		NUMBER,
CONSTRAINT FK_F_ENTITY_F_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID)
);
CREATE SEQUENCE FEATURE_ENTITY_TYPES_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_SOURCES
(
ID					NUMBER,
FEATURE_ID 			NUMBER,
SOURCE_ID 			NUMBER,
CONSTRAINT FK_F_SOURCE_F_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID)
);
CREATE SEQUENCE FEATURE_SOURCES_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_CONFIGURATIONS
(
ID 					NUMBER,
NAME				VARCHAR2(1024),
FEATURE_ID			NUMBER,
STATUS				NUMBER,
CONSTRAINT PK_FEATURE_CONF_ID PRIMARY KEY(ID),
CONSTRAINT FK_FT_CONF_FEATURE_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID)
);
CREATE SEQUENCE FEATURE_CONFIGURATIONS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_REPORT_MAPS
(
ID 					NUMBER,
FEATURE_ID			NUMBER,
REPORT_ID			NUMBER,
CONSTRAINT FK_FT_REPORT_ID FOREIGN KEY(REPORT_ID) REFERENCES REPORTS(ID),
CONSTRAINT FK_FT_REPORT_FEATURE_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID)
);
CREATE SEQUENCE FEATURE_REPORT_MAPS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_CONF_TAKS
(
ID 					NUMBER,
FEATURE_CONF_ID		NUMBER,
TASK_ID 			NUMBER,
CONSTRAINT PK_FEATURE_CONF_TASK_ID PRIMARY KEY(ID),
CONSTRAINT FK_FEATURE_CONFI_TAKS_CONF_ID FOREIGN KEY(FEATURE_CONF_ID) REFERENCES FEATURE_CONFIGURATIONS(ID)
);
CREATE SEQUENCE FEATURE_CONF_TAKS_SEQ START WITH 1 INCREMENT BY 1; 


CREATE TABLE FEATURE_TASK_MAPS
(
ID 					NUMBER,
FEATURE_ID			NUMBER,
TASK_ID				NUMBER,
CONSTRAINT FK_FT_TSK_MAP_FEATURE_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID),
CONSTRAINT FK_FT_TSK_MAP_TASK_ID FOREIGN KEY(TASK_ID) REFERENCES TASKS(ID)
);
CREATE SEQUENCE FEATURE_TASK_MAPS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE RECORD_CONFIG_TASK_MAPS 
(
ID 					NUMBER,
RECORD_CONFIG_ID 	NUMBER,
TASK_ID 			NUMBER,
CONSTRAINT FK_RC_TSK_MAP_RECORD_CONFIG_ID FOREIGN KEY(RECORD_CONFIG_ID) REFERENCES RECORD_CONFIGS(ID),
CONSTRAINT FK_RC_TSK_MAP_TASK_ID FOREIGN KEY(TASK_ID) REFERENCES TASKS(ID)
);
CREATE SEQUENCE RECORD_CONFIG_TASK_MAPS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_SCHEDULER_MAPS
(
ID 					NUMBER,
FEATURE_ID			NUMBER,
SCHEDULER_JOB_NAME	varchar2(1024),
FEATURE_CONF_ID		NUMBER,
CONSTRAINT FK_FT_SCH_MAP_FEATURE_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID),
CONSTRAINT FK_FT_SCHEDULER_MAP_ID FOREIGN KEY(FEATURE_CONF_ID) REFERENCES FEATURE_CONFIGURATIONS(ID)
);
CREATE SEQUENCE FEATURE_SCHEDULER_MAPS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_PSEUDO_FUNCTN_MAPS
(
ID 					NUMBER,
FEATURE_ID			NUMBER,
PSEUDO_FUNCTION_ID			NUMBER,
CONSTRAINT FK_FT_FUNCTN_FEATURE_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID),
CONSTRAINT FK_FT_FUNCTN_PSEUDO_FUNTN_ID FOREIGN KEY(PSEUDO_FUNCTION_ID) REFERENCES PSEUDO_FUNCTIONS(ID)
);
CREATE SEQUENCE FEATURE_PSEUDO_FUNCTN_MAPS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_ACTION_MAPS
(
ID 					NUMBER,
FEATURE_ID			NUMBER,
ANAYLST_ACTION_ID 	NUMBER,
CONSTRAINT FK_ACTN_MP_FEATURE_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID),
CONSTRAINT FK_ACTN_MP_ANALYST_ACTION_ID FOREIGN KEY(ANAYLST_ACTION_ID) REFERENCES ANALYST_ACTIONS(ID)
);
CREATE SEQUENCE FEATURE_ACTION_MAPS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_RULE_MAPS
(
ID 					NUMBER,
FEATURE_ID			NUMBER,
RULE_ID 			NUMBER,
CONSTRAINT FK_FT_RULE_MAPS_FEATURE_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID),
CONSTRAINT FK_FT_RULE_MAPS_RULE_ID FOREIGN KEY(RULE_ID) REFERENCES RULES(ID)
);
CREATE SEQUENCE FEATURE_RULE_MAPS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_ELEMENT_TYPE_MAPS
(
ID 					NUMBER,
FEATURE_ID			NUMBER,
FP_ELEMENT_TYPE_ID	NUMBER,
CONSTRAINT FK_FT_ELE_MAPS_FEATURE_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID),
CONSTRAINT FK_FT_ELE_MAPS_FP_ID FOREIGN KEY(FP_ELEMENT_TYPE_ID) REFERENCES FP_ELEMENT_TYPES(ID)
);
CREATE SEQUENCE FEATURE_ELEMENT_TYPE_MAPS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE FEATURE_FP_ENTITIES_MAPS
(
ID 				NUMBER,
FEATURE_CONF_ID NUMBER,
FP_ENTITY_ID 	NUMBER,
CONSTRAINT FK_FP_ENT_MAP_F_CONFID FOREIGN KEY(FEATURE_CONF_ID) REFERENCES FEATURE_CONFIGURATIONS(ID),
CONSTRAINT FK_FT_FP_ENTITY_ID FOREIGN KEY(FP_ENTITY_ID) REFERENCES FP_ENTITIES(ID)
);
CREATE SEQUENCE FEATURE_FP_ENTITIES_MAPS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE AGG_RECORD_CONFIG_MAPS
(
ID 					NUMBER,
AGGREGATION_TYPE 	NUMBER,
RECORD_CONFIG_ID	NUMBER,
STATUS				NUMBER,
CONSTRAINT FK_AGG_RECORD_AGG_TYPE FOREIGN KEY(AGGREGATION_TYPE) REFERENCES AGGREGATION_TYPES(ID),
CONSTRAINT FK_AGG_RECORD_REC_CONF_ID FOREIGN KEY(RECORD_CONFIG_ID) REFERENCES RECORD_CONFIGS(ID)
);
CREATE SEQUENCE AGG_RECORD_CONFIG_MAPS_SEQ START WITH 1 INCREMENT BY 1; 

CREATE TABLE REPORT_RECORD_CONFIG_MAPS
(
ID 					NUMBER,
RECORD_CONFIG_ID	NUMBER,
REPORT_ID 			NUMBER,
CONSTRAINT FK_REPORT_RC_ID FOREIGN KEY(RECORD_CONFIG_ID) REFERENCES RECORD_CONFIGS(ID)
);
CREATE SEQUENCE REPORT_RECORD_CONFIG_MAPS_SEQ START WITH 1 INCREMENT BY 1 ;

CREATE TABLE FEATURE_AUDIT_CODES
(
ID 							NUMBER,
FEATURE_ID					NUMBER,
AUDIT_LOG_EVENT_CODES_ID	NUMBER,
CONSTRAINT FK_FE_AU_CO_FE_ID FOREIGN KEY(FEATURE_ID) REFERENCES FEATURE_STATUS(ID)
);
CREATE SEQUENCE FEATURE_AUDIT_CODES_SEQ START WITH 1 INCREMENT BY 1 ;

spool off ;

