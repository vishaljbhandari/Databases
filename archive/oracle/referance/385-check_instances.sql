DECLARE
	INST VARCHAR2(80);
	TOTAL_INSTANCES NUMBER(5) ;
BEGIN
	SELECT VALUE INTO TOTAL_INSTANCES FROM CONFIGURATIONS WHERE CONFIG_KEY='STATRULE_INSTANCES';

	FOR I IN 0..TOTAL_INSTANCES-1
	LOOP
		BEGIN
			SELECT VALUE INTO INST FROM CONFIGURATIONS WHERE CONFIG_KEY='SUBINST_STATSRULE_'||I;
			UPDATE CONFIGURATIONS SET VALUE='ID > 1024' WHERE CONFIG_KEY='SUBINST_STATSRULE_'||I;
		EXCEPTION
			WHEN NO_DATA_FOUND THEN
				DBMS_OUTPUT.PUT_LINE('SUBINST_STATSRULE_'||I||'  NOT FOUND');
				INSERT INTO CONFIGURATIONS (ID, CONFIG_KEY, VALUE) VALUES(CONFIGURATIONS_SEQ.NEXTVAL, 'SUBINST_STATSRULE_'||I, 'ID > 1024');
			WHEN OTHERS THEN
				DBMS_OUTPUT.PUT_LINE('Failed to Insert/Update Configurations for SUBINST_STATSRULE_'||I);
		END;
	END LOOP;
	COMMIT;
END;
/
